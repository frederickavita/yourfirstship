{{extend 'malayout.html'}}

<div class="flex h-screen bg-slate-50 font-sans text-slate-900 overflow-hidden">

    {{include 'sidebar.html'}}

    <div class="flex-1 flex flex-col overflow-hidden relative">
        {{ page_title = "Security Protocols" }}
        {{include 'header.html'}}

        <main class="flex-1 overflow-y-auto p-6 bg-slate-50"> <div class="max-w-xl mx-auto"> <a href="{{=URL('profile')}}" class="inline-flex items-center gap-2 text-[10px] font-bold text-slate-500 hover:text-indigo-600 mb-4 transition uppercase tracking-wide">
                    <i data-lucide="arrow-left" class="h-3 w-3"></i> Back to Captain's Log
                </a>

                <div class="bg-white rounded-lg border border-slate-200 shadow-sm overflow-hidden">
                    <div class="px-4 py-3 border-b border-slate-100 bg-slate-50/50">
                        <div class="flex items-center gap-3">
                            <div class="h-8 w-8 rounded-full bg-indigo-100 flex items-center justify-center text-indigo-600">
                                <i data-lucide="shield-check" class="h-4 w-4"></i>
                            </div>
                            <div>
                                <h2 class="text-sm font-bold text-slate-800">Change Access Code</h2>
                                <p class="text-[10px] text-slate-500">Update credentials to secure the ship.</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="p-6"> {{=form}}
                    </div>
                </div>

                <div class="mt-4 flex gap-3 p-3 bg-blue-50 border border-blue-100 rounded text-blue-800 text-xs">
                    <i data-lucide="info" class="h-4 w-4 shrink-0 mt-0.5"></i>
                    <p class="leading-relaxed">
                        <strong>Security Tip:</strong> Use a random password generated by a manager. Do not reuse codes.
                    </p>
                </div>

            </div>
        </main>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", () => {
        if(typeof lucide !== 'undefined') lucide.createIcons();
        
        // 1. STYLER LES INPUTS (Version Compacte)
        const inputs = document.querySelectorAll('input[type="password"], input[type="text"]');
        inputs.forEach(inp => {
            // text-sm -> text-xs, py-2 -> py-1.5
            inp.classList.add('w-full', 'bg-white', 'border', 'border-slate-200', 'rounded', 'px-3', 'py-1.5', 'text-xs', 'focus:ring-2', 'focus:ring-indigo-500', 'outline-none', 'transition');
        });
        
        // 2. STYLER LES LABELS (Générés par Web2py)
        // On cible les labels dans le formulaire pour les rendre petits et gras
        const labels = document.querySelectorAll('form label');
        labels.forEach(lbl => {
            lbl.classList.add('block', 'text-[10px]', 'font-bold', 'text-slate-500', 'uppercase', 'mb-1', 'mt-2');
        });

        // 3. STYLER LE BOUTON SUBMIT (Version Compacte)
        const submit = document.querySelector('input[type="submit"]');
        if(submit) {
            submit.classList.add('bg-indigo-600', 'text-white', 'px-4', 'py-1.5', 'rounded', 'text-xs', 'font-bold', 'hover:bg-indigo-700', 'transition', 'cursor-pointer', 'shadow-sm', 'mt-4');
            submit.value = "Update Password"; 
        }
    });
</script>

<style>
/* Réduire l'espacement des erreurs web2py */
.error {
    color: #ef4444; /* red-500 */
    font-size: 10px;
    font-weight: bold;
    margin-top: 2px;
    display: block;
}

/* Forcer un peu de compactage sur la structure de table de web2py si nécessaire */
form table tr td {
    padding-bottom: 8px !important;
}
</style>